(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{125:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h}),n.d(t,"query",function(){return m});var a=n(6),r=n.n(a),i=n(46),o=n.n(i),s=n(0),c=n.n(s),u=n(130),l=n.n(u),d=n(141),g=n.n(d),p=n(137),f=n.n(p);n(156);"undefined"!=typeof window&&(window.PDFJS=g.a,window.PDFJS.workerSrc="/pdf.worker.js");var h=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={page:n.getInitialPageCount(),fullscreen:!1},n.nextPage=n.nextPage.bind(o()(o()(n))),n.prevPage=n.prevPage.bind(o()(o()(n))),n.navigate=n.navigate.bind(o()(o()(n))),n.toggleFullscreen=n.toggleFullscreen.bind(o()(o()(n))),n}r()(t,e);var n=t.prototype;return n.getInitialPageCount=function(){if("undefined"!=typeof window&&window.localStorage){var e=this.props.data.book.fingerprint;return+window.localStorage.getItem("currentPage:"+e)||1}},n.storeCurrentPage=function(){if("undefined"!=typeof window&&window.localStorage){var e=this.props.data.book.fingerprint;window.localStorage.setItem("currentPage:"+e,this.state.page)}},n.toggleFullscreen=function(){this.setState({fullscreen:!this.state.fullscreen})},n.nextPage=function(){var e=this.state.page+=1;e<1||this.setState({page:e})},n.prevPage=function(){var e=this.state.page-=1;this.state.page>=this.props.data.book.pageCount||this.setState({page:e})},n.navigate=function(e){var t=e.target.getBoundingClientRect();e.clientX-t.left<Math.floor(t.width/2)?this.prevPage():this.nextPage()},n.componentDidMount=function(){g.a.getDocument(this.props.data.book.downloadPath).promise.then(function(e){this.pdf=e,this.renderPage()}.bind(this))},n.componentDidUpdate=function(){this.renderPage(),this.storeCurrentPage()},n.renderPage=function(){this.pdf.getPage(this.state.page).then(function(e){var t=e.getViewport(1.5),n=document.getElementById("book-canvas"),a=n.getContext("2d");n.height=t.height,n.width=t.width;var r={canvasContext:a,viewport:t};e.render(r)})},n.render=function(){var e=this.props.data.book,t=f()("book-view",{fullscreen:this.state.fullscreen});return c.a.createElement("div",null,c.a.createElement("header",{className:"book-headline"},c.a.createElement("h1",{className:"title"},e.title),c.a.createElement("a",{href:e.downloadPath,className:"download-link"},"⏬")),c.a.createElement(l.a,{className:"back-link",to:"/"},"Home"),c.a.createElement("p",{className:"author"},"Author: ",e.author),c.a.createElement("section",{className:t},c.a.createElement("div",{className:"controls"},c.a.createElement("button",{onClick:this.prevPage,disabled:this.state.page<=1},"Back"),c.a.createElement("p",{className:"page-count"},"Page ",this.state.page," of ",e.pageCount),c.a.createElement("div",{className:"controls-right"},c.a.createElement("button",{onClick:this.nextPage,disabled:this.state.page>=this.props.data.book.pageCount},"Next"),c.a.createElement("button",{onClick:this.toggleFullscreen},this.state.fullscreen?"▼":"▲"))),c.a.createElement("canvas",{id:"book-canvas",onClick:this.navigate})))},t}(s.Component),m="1515268690"},132:function(e,t,n){var a;e.exports=(a=n(136))&&a.default||a},133:function(e,t,n){"use strict";n.r(t),n.d(t,"graphql",function(){return f}),n.d(t,"StaticQueryContext",function(){return g}),n.d(t,"StaticQuery",function(){return p});var a=n(0),r=n.n(a),i=n(4),o=n.n(i),s=n(130),c=n.n(s);n.d(t,"Link",function(){return c.a}),n.d(t,"withPrefix",function(){return s.withPrefix}),n.d(t,"navigate",function(){return s.navigate}),n.d(t,"push",function(){return s.push}),n.d(t,"replace",function(){return s.replace}),n.d(t,"navigateTo",function(){return s.navigateTo});var u=n(132),l=n.n(u);n.d(t,"PageRenderer",function(){return l.a});var d=n(29);n.d(t,"parsePath",function(){return d.a});var g=r.a.createContext({}),p=function(e){return r.a.createElement(g.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):r.a.createElement("div",null,"Loading (StaticQuery)")})};function f(){throw new Error("It appears like Gatsby is misconfigured. Gatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away,. Unfortunately, something went wrong and the query was left in the compiled code.\n\n.Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.")}p.propTypes={data:o.a.object,query:o.a.string.isRequired,render:o.a.func,children:o.a.func}},136:function(e,t,n){"use strict";n.r(t);n(28);var a=n(0),r=n.n(a),i=n(4),o=n.n(i),s=n(51),c=n(2),u=function(e){var t=e.location,n=c.default.getResourcesForPathnameSync(t.pathname);return r.a.createElement(s.a,Object.assign({location:t,pageResources:n},n.json))};u.propTypes={location:o.a.shape({pathname:o.a.string.isRequired}).isRequired},t.default=u},145:function(e,t){},146:function(e,t){},147:function(e,t){},148:function(e,t){},156:function(e,t,n){}}]);
//# sourceMappingURL=component---src-templates-view-book-js-0ca215e106d0afb6f240.js.map